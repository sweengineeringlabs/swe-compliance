# doc-engine rules â€” 80 documentation compliance checks
# Embedded in binary via include_str!("../../rules.toml")

# =============================================================================
# Checks 1-13: Structure
# =============================================================================

[[rules]]
id = 1
category = "structure"
description = "Root docs/ folder exists (plural)"
severity = "error"
type = "dir_exists"
path = "docs"
scope = "small"

[[rules]]
id = 2
category = "structure"
description = "docs/README.md hub document exists"
severity = "error"
type = "file_exists"
path = "docs/README.md"
scope = "small"

[[rules]]
id = 3
category = "structure"
description = "docs/glossary.md exists"
severity = "error"
type = "file_exists"
path = "docs/glossary.md"
scope = "small"

[[rules]]
id = 4
category = "structure"
description = "All module doc folders use docs/ (plural), not doc/"
severity = "error"
type = "builtin"
handler = "module_docs_plural"
scope = "small"

[[rules]]
id = 5
category = "structure"
description = "No module has both doc/ and docs/"
severity = "error"
type = "builtin"
handler = "module_docs_plural"
scope = "small"

[[rules]]
id = 6
category = "structure"
description = "docs/3-design/compliance/compliance_checklist.md exists"
severity = "warning"
type = "file_exists"
path = "docs/3-design/compliance/compliance_checklist.md"
scope = "large"

[[rules]]
id = 7
category = "structure"
description = "Compliance checklist references architecture.md"
severity = "info"
type = "file_content_matches"
path = "docs/3-design/compliance/compliance_checklist.md"
pattern = "architecture\\.md"
scope = "large"

[[rules]]
id = 8
category = "structure"
description = "Every enforceable rule has a checkbox"
severity = "info"
type = "builtin"
handler = "checklist_completeness"
scope = "large"

[[rules]]
id = 9
category = "structure"
description = "SDLC phase numbering correct (0-7)"
severity = "warning"
type = "builtin"
handler = "sdlc_phase_numbering"
scope = "small"

[[rules]]
id = 10
category = "structure"
description = "SDLC phases in correct order"
severity = "warning"
type = "builtin"
handler = "sdlc_phase_numbering"
scope = "small"

[[rules]]
id = 11
category = "structure"
description = "ADR directory docs/3-design/adr/ exists"
severity = "warning"
type = "dir_exists"
path = "docs/3-design/adr"
scope = "medium"

[[rules]]
id = 12
category = "structure"
description = "Developer guides in 4-development/guide/ (singular, not guides/)"
severity = "warning"
type = "dir_not_exists"
path = "docs/4-development/guides"
message = "Use guide/ (singular), not guides/"
scope = "medium"

[[rules]]
id = 13
category = "structure"
description = "UX/UI assets in uxui/ (not uiux/)"
severity = "warning"
type = "dir_not_exists"
path = "docs/uiux"
message = "Use uxui/, not uiux/"
scope = "medium"

# =============================================================================
# Checks 14-25: Naming
# =============================================================================

[[rules]]
id = 14
category = "naming"
description = "README.md exists (uppercase)"
severity = "error"
type = "file_exists"
path = "README.md"
scope = "small"

[[rules]]
id = 15
category = "naming"
description = "CONTRIBUTING.md exists (uppercase)"
severity = "error"
type = "file_exists"
path = "CONTRIBUTING.md"
scope = "medium"

[[rules]]
id = 16
category = "naming"
description = "CHANGELOG.md exists (uppercase)"
severity = "error"
type = "file_exists"
path = "CHANGELOG.md"
scope = "medium"

[[rules]]
id = 17
category = "naming"
description = "SECURITY.md exists (uppercase)"
severity = "error"
type = "file_exists"
path = "SECURITY.md"
scope = "medium"

[[rules]]
id = 18
category = "naming"
description = "LICENSE file exists (uppercase)"
severity = "error"
type = "file_exists"
path = "LICENSE"
scope = "small"

[[rules]]
id = 19
category = "naming"
description = ".gitignore exists"
severity = "error"
type = "file_exists"
path = ".gitignore"
scope = "small"

[[rules]]
id = 20
category = "naming"
description = ".editorconfig exists"
severity = "warning"
type = "file_exists"
path = ".editorconfig"
scope = "medium"

[[rules]]
id = 21
category = "naming"
description = "All filenames in docs/ are lowercase"
severity = "error"
type = "builtin"
handler = "snake_lower_case"
scope = "small"

[[rules]]
id = 22
category = "naming"
description = "All filenames in docs/ use underscores, not hyphens"
severity = "error"
type = "builtin"
handler = "snake_lower_case"
scope = "small"

[[rules]]
id = 23
category = "naming"
description = "No spaces in docs/ filenames"
severity = "error"
type = "builtin"
handler = "snake_lower_case"
scope = "small"

[[rules]]
id = 24
category = "naming"
description = "Guide files follow name_{phase}_guide.md convention"
severity = "warning"
type = "builtin"
handler = "guide_naming"
scope = "medium"

[[rules]]
id = 25
category = "naming"
description = "No *_testing_* files outside 5-testing/"
severity = "warning"
type = "builtin"
handler = "testing_file_placement"
scope = "medium"

# =============================================================================
# Checks 26-32: Root Files
# =============================================================================

[[rules]]
id = 26
category = "root_files"
description = "README.md exists"
severity = "error"
type = "file_exists"
path = "README.md"
scope = "small"

[[rules]]
id = 27
category = "root_files"
description = "CONTRIBUTING.md exists"
severity = "error"
type = "file_exists"
path = "CONTRIBUTING.md"
scope = "medium"

[[rules]]
id = 28
category = "root_files"
description = "CHANGELOG.md exists"
severity = "warning"
type = "file_exists"
path = "CHANGELOG.md"
scope = "medium"

[[rules]]
id = 29
category = "root_files"
description = "SECURITY.md exists"
severity = "error"
type = "file_exists"
path = "SECURITY.md"
scope = "medium"

[[rules]]
id = 30
category = "root_files"
description = "LICENSE file exists"
severity = "error"
type = "file_exists"
path = "LICENSE"
scope = "small"

[[rules]]
id = 31
category = "root_files"
description = "CODE_OF_CONDUCT.md and SUPPORT.md exist (open-source)"
severity = "warning"
type = "builtin"
handler = "open_source_community_files"
project_type = "open_source"
scope = "medium"

[[rules]]
id = 32
category = "root_files"
description = "GitHub issue/PR templates exist (open-source)"
severity = "warning"
type = "builtin"
handler = "open_source_github_templates"
project_type = "open_source"
scope = "medium"

# =============================================================================
# Checks 33-39: Content
# =============================================================================

[[rules]]
id = 33
category = "content"
description = "Every .md file in docs/ has **Audience**: declaration"
severity = "error"
type = "glob_content_matches"
glob = "docs/**/*.md"
pattern = "\\*\\*Audience\\*\\*:"
scope = "small"

[[rules]]
id = 34
category = "content"
description = "Module README.md files have **Audience**: declaration"
severity = "error"
type = "glob_content_matches"
glob = "**/docs/README.md"
pattern = "\\*\\*Audience\\*\\*:"
scope = "small"

[[rules]]
id = 35
category = "content"
description = "Docs >=200 lines should have TLDR section"
severity = "warning"
type = "builtin"
handler = "tldr_conditional"
scope = "medium"

[[rules]]
id = 36
category = "content"
description = "Docs <200 lines should not need TLDR section"
severity = "info"
type = "builtin"
handler = "tldr_conditional"
scope = "medium"

[[rules]]
id = 37
category = "content"
description = "Glossary uses **Term** - Definition format"
severity = "warning"
type = "builtin"
handler = "glossary_format"
scope = "medium"

[[rules]]
id = 38
category = "content"
description = "Glossary terms are alphabetized"
severity = "warning"
type = "builtin"
handler = "glossary_alphabetized"
scope = "medium"

[[rules]]
id = 39
category = "content"
description = "Glossary acronyms have expansions"
severity = "info"
type = "builtin"
handler = "glossary_acronyms"
scope = "medium"

# =============================================================================
# Checks 40-43: Navigation
# =============================================================================

[[rules]]
id = 40
category = "navigation"
description = "Root README links to docs/README.md"
severity = "error"
type = "file_content_matches"
path = "README.md"
pattern = "docs/README\\.md"
scope = "small"

[[rules]]
id = 41
category = "navigation"
description = "docs/README.md hub uses W3H structure"
severity = "warning"
type = "builtin"
handler = "w3h_hub"
scope = "medium"

[[rules]]
id = 42
category = "navigation"
description = "Hub links to all present SDLC phase directories"
severity = "warning"
type = "builtin"
handler = "hub_links_phases"
scope = "medium"

[[rules]]
id = 43
category = "navigation"
description = "Root README does not deep-link into docs/ subdirectories"
severity = "warning"
type = "builtin"
handler = "no_deep_links"
scope = "medium"

# =============================================================================
# Checks 44-47: Cross-References
# =============================================================================

[[rules]]
id = 44
category = "cross_ref"
description = "All internal markdown links resolve to existing files"
severity = "error"
type = "builtin"
handler = "link_resolution"
scope = "small"

[[rules]]
id = 45
category = "cross_ref"
description = "All relative links are valid"
severity = "warning"
type = "builtin"
handler = "link_resolution"
scope = "small"

[[rules]]
id = 46
category = "cross_ref"
description = "All references use docs/ (plural), not doc/"
severity = "error"
type = "glob_content_not_matches"
glob = "docs/**/*.md"
pattern = "\\bdoc/"
exclude_pattern = "docs/"
scope = "small"

[[rules]]
id = 47
category = "cross_ref"
description = "All references use guide/ (singular), not guides/"
severity = "error"
type = "glob_content_not_matches"
glob = "docs/**/*.md"
pattern = "\\bguides/"
exclude_pattern = "guide/"
scope = "small"

# =============================================================================
# Checks 48-50: ADR
# =============================================================================

[[rules]]
id = 48
category = "adr"
description = "ADR index file exists"
severity = "warning"
type = "file_exists"
path = "docs/3-design/adr/README.md"
scope = "medium"

[[rules]]
id = 49
category = "adr"
description = "ADR files follow NNN-title.md naming convention"
severity = "warning"
type = "builtin"
handler = "adr_naming"
scope = "medium"

[[rules]]
id = 50
category = "adr"
description = "ADR index references all ADR files"
severity = "info"
type = "builtin"
handler = "adr_index_completeness"
scope = "medium"

# =============================================================================
# Checks 51-53: Traceability
# =============================================================================

[[rules]]
id = 51
category = "traceability"
description = "Populated SDLC phase directories contain their expected artifact"
severity = "warning"
type = "builtin"
handler = "phase_artifact_presence"
scope = "medium"

[[rules]]
id = 52
category = "traceability"
description = "Design documents reference requirements"
severity = "warning"
type = "builtin"
handler = "design_traces_requirements"
scope = "medium"

[[rules]]
id = 53
category = "traceability"
description = "Planning documents reference architecture"
severity = "warning"
type = "builtin"
handler = "plan_traces_design"
scope = "medium"

# =============================================================================
# Checks 69-72: Structure, Backlog, Root Files (BL-01, BL-02, BL-07, BL-08)
# =============================================================================

[[rules]]
id = 69
category = "structure"
description = "docs/4-development/developer_guide.md exists"
severity = "warning"
type = "file_exists"
path = "docs/4-development/developer_guide.md"
scope = "small"

[[rules]]
id = 70
category = "root_files"
description = "INTERNAL_USAGE.md exists (internal projects)"
severity = "warning"
type = "file_exists"
path = "INTERNAL_USAGE.md"
project_type = "internal"
scope = "large"

[[rules]]
id = 71
category = "backlog"
description = "docs/2-planning/backlog.md exists"
severity = "warning"
type = "file_exists"
path = "docs/2-planning/backlog.md"
scope = "medium"

[[rules]]
id = 72
category = "structure"
description = "docs/templates/ directory exists"
severity = "info"
type = "dir_exists"
path = "docs/templates"
scope = "large"

# =============================================================================
# Checks 73-76: Builtin checks (BL-08, BL-09, BL-10, BL-11)
# =============================================================================

[[rules]]
id = 73
category = "structure"
description = "docs/templates/ contains template files"
severity = "info"
type = "builtin"
handler = "templates_populated"
scope = "large"

[[rules]]
id = 74
category = "navigation"
description = "Hub documents use W3H structure"
severity = "info"
type = "builtin"
handler = "w3h_extended"
scope = "large"

[[rules]]
id = 75
category = "content"
description = "Root README.md under 100 lines"
severity = "info"
type = "builtin"
handler = "readme_line_count"
scope = "large"

[[rules]]
id = 76
category = "naming"
description = "FR artifacts follow FR_NNN naming"
severity = "info"
type = "builtin"
handler = "fr_naming"
scope = "large"

# =============================================================================
# Checks 77-81: Module checks (BL-03 through BL-06)
# =============================================================================

[[rules]]
id = 77
category = "module"
description = "Module READMEs follow W3H structure"
severity = "warning"
type = "builtin"
handler = "module_readme_w3h"
scope = "medium"

[[rules]]
id = 78
category = "module"
description = "Modules have examples directory"
severity = "warning"
type = "builtin"
handler = "module_examples_tests"
scope = "medium"

[[rules]]
id = 79
category = "module"
description = "Modules have integration tests"
severity = "warning"
type = "builtin"
handler = "module_examples_tests"
scope = "medium"

[[rules]]
id = 80
category = "module"
description = "Modules have toolchain documentation"
severity = "warning"
type = "builtin"
handler = "module_toolchain_docs"
scope = "large"

[[rules]]
id = 81
category = "module"
description = "Module deployment docs complete"
severity = "warning"
type = "builtin"
handler = "module_deployment_docs"
scope = "large"

# =============================================================================
# Check 82: Traceability (backlog -> requirements)
# =============================================================================

[[rules]]
id = 82
category = "traceability"
description = "Backlog references requirements/SRS"
severity = "warning"
type = "builtin"
handler = "backlog_traces_requirements"
scope = "medium"

# =============================================================================
# Checks 83-88: Planning Phase Artifacts (FR-804)
# =============================================================================

[[rules]]
id = 83
category = "planning"
description = "docs/2-planning/risk_register.md exists"
severity = "info"
type = "file_exists"
path = "docs/2-planning/risk_register.md"
scope = "large"

[[rules]]
id = 84
category = "planning"
description = "docs/2-planning/estimation.md exists"
severity = "info"
type = "file_exists"
path = "docs/2-planning/estimation.md"
scope = "large"

[[rules]]
id = 85
category = "planning"
description = "docs/2-planning/schedule.md exists (open-source)"
severity = "info"
type = "file_exists"
path = "docs/2-planning/schedule.md"
project_type = "open_source"
scope = "large"

[[rules]]
id = 86
category = "planning"
description = "docs/2-planning/resource_plan.md exists (open-source)"
severity = "info"
type = "file_exists"
path = "docs/2-planning/resource_plan.md"
project_type = "open_source"
scope = "large"

[[rules]]
id = 87
category = "planning"
description = "docs/2-planning/communication_plan.md exists (open-source)"
severity = "info"
type = "file_exists"
path = "docs/2-planning/communication_plan.md"
project_type = "open_source"
scope = "large"

[[rules]]
id = 88
category = "planning"
description = "docs/2-planning/quality_plan.md exists"
severity = "info"
type = "file_exists"
path = "docs/2-planning/quality_plan.md"
scope = "large"

# =============================================================================
# Check 89: Requirements (ISO/IEC/IEEE 29148:2018, FR-805)
# =============================================================================

[[rules]]
id = 89
category = "requirements"
description = "SRS requirements have ISO/IEC/IEEE 29148:2018 attribute tables"
severity = "warning"
type = "builtin"
handler = "srs_29148_attributes"
scope = "large"

# Check 90: Architecture (ISO/IEC/IEEE 42010:2022, FR-806)
[[rules]]
id = 90
category = "requirements"
description = "Architecture documents have ISO/IEC/IEEE 42010:2022 sections"
severity = "info"
type = "builtin"
handler = "arch_42010_sections"
scope = "large"

# Check 91: Testing (ISO/IEC/IEEE 29119-3:2021, FR-807)
[[rules]]
id = 91
category = "requirements"
description = "Testing strategies have ISO/IEC/IEEE 29119-3:2021 sections"
severity = "info"
type = "builtin"
handler = "test_29119_sections"
scope = "large"

# Check 92: Production readiness document (ISO/IEC 25010:2023, FR-808)
[[rules]]
id = 92
category = "requirements"
description = "Production readiness document exists"
severity = "info"
type = "builtin"
handler = "prod_readiness_exists"
scope = "large"

# Check 93: Production readiness ISO/IEC 25010 sections (FR-809)
[[rules]]
id = 93
category = "requirements"
description = "Production readiness has ISO/IEC 25010:2023 quality sections"
severity = "info"
type = "builtin"
handler = "prod_readiness_25010_sections"
scope = "large"

# Check 94: Developer guide ISO/IEC/IEEE 26514 sections (FR-810)
[[rules]]
id = 94
category = "requirements"
description = "Developer guide has ISO/IEC/IEEE 26514:2022 sections"
severity = "info"
type = "builtin"
handler = "dev_guide_26514_sections"
scope = "large"

# Check 95: Backlog content sections (FR-811)
[[rules]]
id = 95
category = "requirements"
description = "Backlog has required sections (items, completed, blockers)"
severity = "info"
type = "builtin"
handler = "backlog_sections"
scope = "large"

# Check 96: Production readiness ISO/IEC/IEEE 12207:2017 lifecycle sections (FR-812)
[[rules]]
id = 96
category = "requirements"
description = "Production readiness has ISO/IEC/IEEE 12207:2017 lifecycle sections"
severity = "info"
type = "builtin"
handler = "prod_readiness_12207_sections"
scope = "large"

# Check 97: Production readiness ISO/IEC 25010:2023 supplementary sections (FR-813)
[[rules]]
id = 97
category = "requirements"
description = "Production readiness has supplementary ISO/IEC 25010:2023 quality sections"
severity = "info"
type = "builtin"
handler = "prod_readiness_25010_supp_sections"
scope = "large"

# Check 98: Production readiness ISO/IEC 25040:2024 evaluation sections (FR-814)
[[rules]]
id = 98
category = "requirements"
description = "Production readiness has ISO/IEC 25040:2024 evaluation sections"
severity = "info"
type = "builtin"
handler = "prod_readiness_25040_sections"
scope = "large"
